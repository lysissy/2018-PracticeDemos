"use strict";webpackJsonp([94],{1485:function e(n,t,o){n.exports=o(31)},31:function e(n,t,o){var i;i=function e(){"use strict";var n=function e(n){try{return JSON.parse(n)||{}}catch(e){return{}}},t=function(){var e=navigator.userAgent;switch(!0){case/MicroMessenger/i.test(e):return"weixin";case/QQ/i.test(e):return"qq";case/weibo/.test(e):return"weibo";default:return"browser"}}(),o={weixin:"wx2a416286e96100ed",qq:"101204453",weibo:"1772937595",browser:""},e={appId:o[t],set:function e(n){var t=n.info,o=n.expired;document.cookie="snsInfo["+this.appId+"]="+t+"; Domain=.ele.me; Path=/; Expires="+o},add:function e(n){this.set({info:encodeURIComponent(JSON.stringify(n)),expired:"Wed, 31 Dec 2098 16:00:00 GMT"})},get:function e(){var t="snsInfo"+(this.appId?"\\["+this.appId+"\\]":""),o=document.cookie.match(new RegExp(t+"=([^;]*)|$"))[1];return n(decodeURIComponent(o))},remove:function e(){this.set({info:"",expired:"Thu, 01 Jan 1970 00:00:00 GMT"})}},i=location.href.match(/[\?|#|&]code=([^&]+)/g),r="";Array.isArray(i)&&(r=i.pop().match(/code=(\w+)/)[1]);var s=r;return{env:t,debug:/(\?|#|&)debug/.test(location.href),code:s,queue:[],appId:o[t],snsInfo:e.get(),config:function n(t){var i=t.wxAppid;i&&(o.weixin=i,this.appId=i,this.snsInfo=e.get(i))},available:function e(){return"browser"!==this.env||(console.warn("调用认证功能请在第三方客户端打开"),!1)},done:function e(){var n=this.snsInfo;for(this.queue.reverse();this.queue.length;){this.queue.pop()(n)}},authorize:function e(){var n="h5.ele.me"===location.host?encodeURIComponent(location.href):encodeURIComponent("https://h5.ele.me/wechat/#eleme_redirect="+encodeURIComponent(location.href)),t={weixin:"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.appId+"&redirect_uri="+n+"&response_type=code&scope=snsapi_userinfo",qq:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id="+this.appId+"&redirect_uri="+n+"&response_type=code&scope=get_user_info",weibo:"https://api.weibo.com/oauth2/authorize?client_id="+this.appId+"&redirect_uri="+n+"&display=mobile"};location.href=t[this.env]},getUserInfo:function t(o){var i=this;if(!(this.queue.push(o)>1)){if(this.snsInfo.openid)return this.done();if(!this.code)return this.authorize();var r=new XMLHttpRequest,s="weixin"===this.env?this.appId:"";r.open("GET","//waltz.ele.me/"+this.env+"/userinfo/"+s+"?code="+encodeURIComponent(this.code)),r.onload=function(){var t=n(r.responseText);if(t.name=t.name||t.nickname,t.openid=t.openid||t.id,t.avatar=t.figureurl_qq_1||t.headimgurl||t.profile_image_url,t.eleme_key=t.eleme_key||t.key,history.pushState(null,"",location.href.replace(/[?|&|#]code=.+/,"")),!t.openid)return i.authorize();i.snsInfo=t,e.add(i.snsInfo),i.done()},r.send()}},share:function e(t){var o=this;if(this.available()){if(!window.wx)return console.error("Uncaught ReferenceError: wx is not defined 使用分享功能需引入第三方的 sdk，请检查代码");var i=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],r=new XMLHttpRequest;r.open("GET","//waltz.ele.me/weixin/jssign/"+this.appId+"?url="+encodeURIComponent(location.href)),r.onload=function(){var e=n(r.responseText),s={appId:e.appid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:i.slice(0)};o.debug&&(s.debug=!0),wx.config(s),wx.ready(function(){return i.forEach(function(e){return wx[e](t)})})},r.send()}}}},n.exports=i()}},[1485]);
webpackJsonp([94],{1485:function(e,n,t){e.exports=t(31)},31:function(e,n,t){var o;o=function(){"use strict";var e=function(e){try{return JSON.parse(e)||{}}catch(e){return{}}},n=function(){var e=navigator.userAgent;switch(!0){case/MicroMessenger/i.test(e):return"weixin";case/QQ/i.test(e):return"qq";case/weibo/.test(e):return"weibo";default:return"browser"}}(),t={weixin:"wx2a416286e96100ed",qq:"101204453",weibo:"1772937595",browser:""},o={appId:t[n],set:function(e){var n=e.info,t=e.expired;document.cookie="snsInfo["+this.appId+"]="+n+"; Domain=.ele.me; Path=/; Expires="+t},add:function(e){this.set({info:encodeURIComponent(JSON.stringify(e)),expired:"Wed, 31 Dec 2098 16:00:00 GMT"})},get:function(){var n="snsInfo"+(this.appId?"\\["+this.appId+"\\]":""),t=document.cookie.match(new RegExp(n+"=([^;]*)|$"))[1];return e(decodeURIComponent(t))},remove:function(){this.set({info:"",expired:"Thu, 01 Jan 1970 00:00:00 GMT"})}},i=location.href.match(/[\?|#|&]code=([^&]+)/g),r="";Array.isArray(i)&&(r=i.pop().match(/code=(\w+)/)[1]);var s=r;return{env:n,debug:/(\?|#|&)debug/.test(location.href),code:s,queue:[],appId:t[n],snsInfo:o.get(),config:function(e){var n=e.wxAppid;n&&(t.weixin=n,this.appId=n,this.snsInfo=o.get(n))},available:function(){return"browser"!==this.env||(console.warn("调用认证功能请在第三方客户端打开"),!1)},done:function(){var e=this.snsInfo;for(this.queue.reverse();this.queue.length;)this.queue.pop()(e)},authorize:function(){var e="h5.ele.me"===location.host?encodeURIComponent(location.href):encodeURIComponent("https://h5.ele.me/wechat/#eleme_redirect="+encodeURIComponent(location.href)),n={weixin:"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.appId+"&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo",qq:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id="+this.appId+"&redirect_uri="+e+"&response_type=code&scope=get_user_info",weibo:"https://api.weibo.com/oauth2/authorize?client_id="+this.appId+"&redirect_uri="+e+"&display=mobile"};location.href=n[this.env]},getUserInfo:function(n){var t=this;if(!(this.queue.push(n)>1)){if(this.snsInfo.openid)return this.done();if(!this.code)return this.authorize();var i=new XMLHttpRequest,r="weixin"===this.env?this.appId:"";i.open("GET","//waltz.ele.me/"+this.env+"/userinfo/"+r+"?code="+encodeURIComponent(this.code)),i.onload=function(){var n=e(i.responseText);if(n.name=n.name||n.nickname,n.openid=n.openid||n.id,n.avatar=n.figureurl_qq_1||n.headimgurl||n.profile_image_url,n.eleme_key=n.eleme_key||n.key,history.pushState(null,"",location.href.replace(/[?|&|#]code=.+/,"")),!n.openid)return t.authorize();t.snsInfo=n,o.add(t.snsInfo),t.done()},i.send()}},share:function(n){var t=this;if(this.available()){if(!window.wx)return console.error("Uncaught ReferenceError: wx is not defined 使用分享功能需引入第三方的 sdk，请检查代码");var o=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],i=new XMLHttpRequest;i.open("GET","//waltz.ele.me/weixin/jssign/"+this.appId+"?url="+encodeURIComponent(location.href)),i.onload=function(){var r=e(i.responseText),s={appId:r.appid,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:o.slice(0)};t.debug&&(s.debug=!0),wx.config(s),wx.ready(function(){return o.forEach(function(e){return wx[e](n)})})},i.send()}}}},e.exports=o()}},[1485]);